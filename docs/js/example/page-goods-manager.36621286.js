import{j as ge,r as _,f as be,s as ye,A as we,ag as t,o as u,c as m,V as e,P as l,a as o,K as X,F,a8 as R,O as y,T as n,U as f,u as I,S as P,a9 as Ve,n as ke,bi as Ne,bg as xe}from"../@vue/@vue.bb851dd4.js";import{T as Ce,E as Te}from"../@wangeditor/@wangeditor.0034da7a.js";import{u as Se}from"../../assets/index-d888841d.js";import{S as ze}from"../sku-single/sku-single.6bc2ab94.js";import{R as je,n as oe,P as Ie}from"../@element-plus/@element-plus.4a730372.js";import{I as Ue}from"../image-cutter-dialog/image-cutter-dialog.e069de0d.js";import{_ as se}from"../vue-img-cutter/vue-img-cutter.f6f262e7.js";import"../@tauri-apps/@tauri-apps.0282bca4.js";import"../pinia/pinia.37daecce.js";import"../vue-router/vue-router.26f4636e.js";import"../localforage/localforage.9280c562.js";import"../@kangc/@kangc.04ce81f8.js";import"../vue/vue.7413d8bf.js";import"../js-cookie/js-cookie.edb2da2a.js";import"../axios/axios.47b9d439.js";import"../element-plus/element-plus.44368d02.js";import"../lodash-es/lodash-es.73b757c4.js";import"../@vueuse/@vueuse.d5ba9393.js";import"../@popperjs/@popperjs.c45de710.js";import"../@ctrl/@ctrl.f8748455.js";import"../dayjs/dayjs.4133557e.js";import"../async-validator/async-validator.7f96df71.js";import"../memoize-one/memoize-one.297ddbcb.js";import"../escape-html/escape-html.0c605d2d.js";import"../normalize-wheel-es/normalize-wheel-es.ed76fb12.js";import"../@floating-ui/@floating-ui.72671fae.js";import"../nprogress/nprogress.d64821e1.js";import"../vue-i18n/vue-i18n.a067515f.js";import"../@intlify/@intlify.df011fbe.js";import"../highlight.js/highlight.js.cb7b8484.js";const qe=N=>(Ne("data-v-c08bba00"),N=N(),xe(),N),Ge={class:"vel_cpt_panel_drawer_add_goods"},Fe=qe(()=>o("h4",null,"添加商品",-1)),Re={class:"dialog_con"},De={class:"page_left_con"},Be={class:"preview"},Ee={class:"preview_con"},Ke={class:"shop_carousel_list"},Me={class:"shop_info_panel"},Oe={class:"tit_panel"},Pe={class:"tit_item price"},He={class:"price_real"},Le={class:"tit_item tit"},We={class:"share"},$e={class:"share_con"},Ae={key:0,class:"tit_item desc"},Je={key:1,class:"tit_item tags"},Qe={class:"sku_panel"},Xe={style:{"padding-bottom":"10px"}},Ye={class:"sku_info"},Ze={class:"sku_right"},el={class:"choose_more_arrow"},ll={class:"choose_time_panel"},tl={style:{"padding-bottom":"10px"}},al={class:"time_panel"},ol={class:"choose_more_arrow"},sl={class:"detail_panel"},nl=["innerHTML"],dl={class:"preview_publish"},ul={class:"page_right_con"},il={class:"add_goods_panel"},rl={class:"shop_thumbs"},pl={class:"mask"},D=400,_l={__name:"add-goods-dialog",props:["dialog"],emits:["onConfirm"],setup(N,{emit:w}){const H=Se(),T=ge(()=>H.wh.w-260),d=_({shopNo:"",shopName:"",shopType:[],thumbs:[],unit:"0",skus:[],status:"1"}),Y=[{value:1,label:"笔记本"},{value:2,label:"台式机"},{value:3,label:"电脑组件",children:[{value:31,label:"显示器"},{value:32,label:"主板"}]},{value:4,label:"外设产品"},{value:5,label:"电脑组件-2",children:[{value:51,label:"显示器-2-1"},{value:52,label:"主板-2-2"}]},{value:6,label:"电脑组件-3",children:[{value:61,label:"显示器-3-1"},{value:62,label:"主板-3-2"}]}],p=_([{name:"",price:.01,delPrice:.02,count:99}]);be(p.value,r=>{d.value.skus=r});const S=ye(),V=_("<p></p>"),U={toolbarKeys:["headerSelect","|","bold","italic","through","underline","color","bgColor","fontSize","blockquote","|","insertTable","uploadImage"]},L={placeholder:"请输入内容...",scroll:!1,MENU_CONF:{uploadImage:{base64LimitSize:5*1024,async customUpload(r,s){x(r,b=>{s(b,"","javascript:(0);")})}}},hoverbarKeys:{image:{menuKeys:[]}}},x=(r,s)=>{let b=1048576;if(console.log(r),r.size>b){ElMessage.error("单张图片不能大于1M！");return}s("https://fuss10.elemecdn.com/d/e6/c4d93a3805b3ce3f323f7974e6f78jpeg.jpeg")},W=r=>{S.value=r};we(()=>{const r=S.value;r?.destroy()});const g=_([]),C=_(""),h=_(!1),z=_(null),$=r=>{g.value.splice(g.value.indexOf(r),1)},j=()=>{C.value&&g.value.push(C.value),h.value=!1,C.value=""},A=()=>{h.value=!0,ke(()=>{z.value&&z.value.focus()})};_([]);const B=_({show:!1});let E=0;const i=r=>{E++,d.value.thumbs.push({id:E,src:r.dataURL}),K.value.validateField("thumbs")},ne=()=>{B.value.show=!0},J=_([{label:"天",value:"0",disabled:!1},{label:"月",value:"1",disabled:!0},{label:"小时",value:"2",disabled:!0}]),de=(D-40)*.7,ue=_({shopNo:[{required:!0,message:"编号不能为空！",trigger:"blur"}],shopName:[{required:!0,message:"商品名称不能为空！",trigger:"blur"},{min:8,max:40,message:"长度在 8 到 40 个字符",trigger:"blur"}],thumbs:[{required:!0,message:"商品图不能为空，请选择商品图！",trigger:"change"}],shopType:[{required:!0,message:"请选择商品分类",trigger:"change"}],unit:[{required:!0,message:"请选择价格单位",trigger:"change"}],skus:[{required:!0,validator:(r,s,b)=>{let q=!0;if(s.length===0)q=!1;else for(let k=0;k<s.length;k++)if(s[k].name===""||s[k].price===null||s[k].delPrice===null||s[k].count===null){q=!1;break}q?(console.log("规格验证通过"),b()):b(new Error("请完善规格信息！"))},trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]}),K=_(null),ie=async()=>{try{await K.value.validate(),console.log("表单验证通过")}catch{console.log("表单验证未通过")}},re=()=>{K.value.validateField("skus")};return(r,s)=>{const b=t("el-image"),q=t("el-carousel-item"),k=t("el-carousel"),c=t("el-text"),G=t("el-icon"),Z=t("el-tag"),ee=t("el-step"),pe=t("el-steps"),le=t("el-tab-pane"),_e=t("el-tabs"),Q=t("el-scrollbar"),te=t("el-button"),M=t("el-input"),v=t("el-form-item"),ce=t("Plus"),me=t("el-cascader"),O=t("el-option"),ae=t("el-select"),fe=t("el-form"),he=t("el-card"),ve=t("el-drawer");return u(),m("div",Ge,[e(ve,{modelValue:N.dialog.show,"onUpdate:modelValue":s[8]||(s[8]=a=>N.dialog.show=a),size:T.value,direction:"rtl",class:"vel_drawer_override"},{header:l(()=>[Fe]),default:l(()=>[e(Q,null,{default:l(()=>[o("div",Re,[o("div",{class:"page_left",style:X({width:D+"px",minWidth:D+"px"})},[o("div",De,[o("div",Be,[o("div",Ee,[e(Q,null,{default:l(()=>[o("div",Ke,[e(k,{height:de+"px"},{default:l(()=>[(u(!0),m(F,null,R(d.value.thumbs,a=>(u(),y(q,{key:a.id},{default:l(()=>[e(b,{src:a.src,fit:"fill",style:{width:"100%"}},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["height"])]),o("div",Me,[o("div",Oe,[o("div",Pe,[o("span",He,[e(c,null,{default:l(()=>[n("￥")]),_:1}),e(c,{style:{"font-size":"22px"},tag:"b"},{default:l(()=>[n(f(p.value[0].price),1)]),_:1}),e(c,null,{default:l(()=>[n("/"+f(J.value[0].label),1)]),_:1})]),e(c,{type:"info",tag:"del",size:"small"},{default:l(()=>[n("￥"+f(p.value[0].delPrice)+"/"+f(J.value[0].label),1)]),_:1})]),o("div",Le,[e(c,{class:"txt",tag:"b"},{default:l(()=>[n(f(d.value.shopName),1)]),_:1}),o("div",We,[o("div",$e,[e(G,null,{default:l(()=>[e(I(je))]),_:1}),e(c,{size:"small"},{default:l(()=>[n("分享")]),_:1})])])]),d.value.desc!==""?(u(),m("div",Ae,[e(c,{type:"info",size:"small"},{default:l(()=>[n(f(d.value.desc),1)]),_:1})])):P("",!0),g.value.length>0?(u(),m("div",Je,[(u(!0),m(F,null,R(g.value,a=>(u(),y(Z,{key:a,type:"danger",size:"small",effect:"plain"},{default:l(()=>[n(f(a),1)]),_:2},1024))),128))])):P("",!0)]),o("div",Qe,[o("div",Xe,[e(c,{tag:"b"},{default:l(()=>[n("规格")]),_:1})]),o("div",Ye,[e(c,{class:"sku_name",type:"info",size:"small"},{default:l(()=>[n(f(p.value[0].name),1)]),_:1}),o("div",Ze,[e(c,{class:"sku_num",type:"info"},{default:l(()=>[n("x1")]),_:1}),o("div",el,[e(G,null,{default:l(()=>[e(I(oe))]),_:1})])])])]),o("div",ll,[o("div",tl,[e(c,{tag:"b"},{default:l(()=>[n("租赁周期")]),_:1})]),o("div",al,[e(pe,{direction:"vertical",active:1,space:40},{default:l(()=>[e(ee,{status:"wait"},{description:l(()=>[n(" 开始时间 : 2023-11-26 ")]),_:1}),e(ee,{status:"wait"},{description:l(()=>[n(" 结束时间 : 2023-11-26 ")]),_:1})]),_:1}),o("div",ol,[e(G,null,{default:l(()=>[e(I(oe))]),_:1})])])]),o("div",sl,[e(_e,{model:0},{default:l(()=>[e(le,{label:"商品详情",class:"goods_detail"},{default:l(()=>[o("div",{innerHTML:V.value},null,8,nl)]),_:1}),e(le,{label:"租赁流程"},{default:l(()=>[n("Config")]),_:1})]),_:1})])])]),_:1})]),o("div",dl,[e(te,{type:"primary",size:"large",onClick:ie},{default:l(()=>[n("保存 ")]),_:1})])])])],4),o("div",{class:"page_right",style:X({width:T.value-D+"px"})},[o("div",ul,[e(he,{shadow:"never",class:"vel_card_override"},{default:l(()=>[o("div",il,[e(Q,null,{default:l(()=>[e(fe,{model:d.value,ref_key:"formRef",ref:K,rules:ue.value,"label-width":"120px"},{default:l(()=>[e(v,{label:"商品编号",prop:"shopNo",style:{"padding-top":"20px"}},{default:l(()=>[e(M,{modelValue:d.value.shopNo,"onUpdate:modelValue":s[0]||(s[0]=a=>d.value.shopNo=a),clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),e(v,{label:"商品名称",prop:"shopName"},{default:l(()=>[e(M,{modelValue:d.value.shopName,"onUpdate:modelValue":s[1]||(s[1]=a=>d.value.shopName=a),clearable:"",style:{width:"400px"}},null,8,["modelValue"])]),_:1}),e(v,{label:"促销信息"},{default:l(()=>[e(M,{modelValue:d.value.desc,"onUpdate:modelValue":s[2]||(s[2]=a=>d.value.desc=a),autosize:{minRows:2,maxRows:4},type:"textarea",placeholder:"请输入简短的描述信息，100个字符以内！"},null,8,["modelValue"])]),_:1}),e(v,{label:"商品图",prop:"thumbs",class:"shop_images"},{default:l(()=>[o("div",rl,[(u(!0),m(F,null,R(d.value.thumbs,a=>(u(),m("div",{class:"shop_img_list",key:a.id},[e(b,{class:"shop_img",src:a.src,fit:"fill"},null,8,["src"]),o("span",pl,[e(G,null,{default:l(()=>[e(I(Ie))]),_:1})])]))),128)),d.value.thumbs.length<7?(u(),m("div",{key:0,class:"el-upload--picture-card",onClick:ne},[e(G,null,{default:l(()=>[e(ce)]),_:1})])):P("",!0)])]),_:1}),e(v,{class:"shop_tags",label:"商品标签"},{default:l(()=>[(u(!0),m(F,null,R(g.value,a=>(u(),y(Z,{key:a,size:"large",closable:"","disable-transitions":!1,onClose:yl=>$(a)},{default:l(()=>[n(f(a),1)]),_:2},1032,["onClose"]))),128)),h.value?(u(),y(M,{key:0,modelValue:C.value,"onUpdate:modelValue":s[3]||(s[3]=a=>C.value=a),size:"default",ref_key:"inputRef",ref:z,onKeyup:Ve(j,["enter"]),onBlur:j,style:{width:"100px"}},null,8,["modelValue","onKeyup"])):(u(),y(te,{key:1,size:"default",onClick:A},{default:l(()=>[n(" + 添加标签 ")]),_:1}))]),_:1}),e(v,{label:"商品分类",prop:"shopType"},{default:l(()=>[e(me,{props:{expandTrigger:"hover"},options:Y,size:"default",modelValue:d.value.shopType,"onUpdate:modelValue":s[4]||(s[4]=a=>d.value.shopType=a),clearable:"",placeholder:"选择分类"},null,8,["modelValue"])]),_:1}),e(v,{label:"规格",prop:"skus",class:"sku_panel"},{default:l(()=>[e(ze,{skus:p.value,onOnDelSkuRow:re},null,8,["skus"])]),_:1}),e(v,{label:"价格单位",prop:"unit"},{default:l(()=>[e(ae,{modelValue:d.value.unit,"onUpdate:modelValue":s[5]||(s[5]=a=>d.value.unit=a),size:"default",clearable:"",placeholder:"选择单位"},{default:l(()=>[(u(!0),m(F,null,R(J.value,a=>(u(),y(O,{key:a.value,label:a.label,value:a.value,disabled:a.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"状态",prop:"status"},{default:l(()=>[e(ae,{modelValue:d.value.status,"onUpdate:modelValue":s[6]||(s[6]=a=>d.value.status=a),clearable:"",size:"default",placeholder:"选择状态"},{default:l(()=>[e(O,{label:"已上架",value:"0"}),e(O,{label:"待上架",value:"1"}),e(O,{label:"已下架",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"商品描述"},{default:l(()=>[o("div",{class:"shop_editor",style:X({maxWidth:T.value-D-200+"px"})},[e(I(Ce),{style:{"border-bottom":"1px solid #e0e0e0"},editor:S.value,defaultConfig:U,mode:"simple"},null,8,["editor"]),e(I(Te),{style:{"min-height":"400px","overflow-y":"hidden"},modelValue:V.value,"onUpdate:modelValue":s[7]||(s[7]=a=>V.value=a),defaultConfig:L,mode:"simple",onOnCreated:W},null,8,["modelValue"])],4)]),_:1})]),_:1},8,["model","rules"])]),_:1})])]),_:1})])],4),e(Ue,{dialog:B.value,onOnConfirm:i,"cut-width":300,"cut-height":210},null,8,["dialog"])])]),_:1})]),_:1},8,["modelValue","size"])])}}},cl=se(_l,[["__scopeId","data-v-c08bba00"]]);const ml={class:"page"},fl={class:"shop_name"},hl={class:"shop_type"},vl={class:"action_btn"},gl={__name:"page-goods-manager",setup(N){const w=_({shopNo:"",shopName:"",status:""}),H=_([{shopNo:"#1",shopName:"联想笔记本电脑办公轻薄",thumb:"https://img1.360buyimg.com/da/jfs/t1/206354/38/39088/64192/6577c7adFfe90680e/5fad216f3b2bf8d3.jpg!q70.jpg",shopTypeName:"电脑-笔记本",status:"2"},{shopNo:"#2",shopName:"联想笔记本电脑办公轻薄本学生本15.6英寸V15 全新升级赛扬N45008GB256G",thumb:"https://img1.360buyimg.com/da/jfs/t1/206354/38/39088/64192/6577c7adFfe90680e/5fad216f3b2bf8d3.jpg!q70.jpg",shopTypeName:"电脑-笔记本",status:"1"},{shopNo:"#3",shopName:"联想笔记本电脑办公轻薄本学生本15.6英寸V15 全新升级赛扬N45008GB256G",thumb:"https://img1.360buyimg.com/da/jfs/t1/206354/38/39088/64192/6577c7adFfe90680e/5fad216f3b2bf8d3.jpg!q70.jpg",shopTypeName:"电脑-笔记本",status:"1"},{shopNo:"#4",shopName:"联想笔记本电脑办公轻薄本学生本15.6英寸V15 全新升级赛扬N45008GB256G",thumb:"https://img1.360buyimg.com/da/jfs/t1/206354/38/39088/64192/6577c7adFfe90680e/5fad216f3b2bf8d3.jpg!q70.jpg",shopTypeName:"电脑-笔记本",status:"0"},{shopNo:"#5",shopName:"联想笔记本电脑办公轻薄本学生本15.6英寸V15 全新升级赛扬N45008GB256G",thumb:"https://img1.360buyimg.com/da/jfs/t1/206354/38/39088/64192/6577c7adFfe90680e/5fad216f3b2bf8d3.jpg!q70.jpg",shopTypeName:"电脑-笔记本",status:"1"}]),T=_({show:!1}),d=()=>{T.value.show=!0};return(Y,p)=>{const S=t("el-input"),V=t("el-form-item"),U=t("el-option"),L=t("el-select"),x=t("el-button"),W=t("el-form"),g=t("el-card"),C=t("el-row"),h=t("el-table-column"),z=t("el-text"),$=t("el-image"),j=t("el-tag"),A=t("el-empty"),B=t("el-table"),E=t("el-pagination");return u(),m("div",ml,[e(g,{shadow:"never",class:"vel_card_override top"},{default:l(()=>[e(W,{inline:!0,model:w.value,class:"-form-inline"},{default:l(()=>[e(V,{label:"编号"},{default:l(()=>[e(S,{modelValue:w.value.shopNo,"onUpdate:modelValue":p[0]||(p[0]=i=>w.value.shopNo=i),placeholder:"商品编号",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(V,{label:"名称"},{default:l(()=>[e(S,{modelValue:w.value.shopName,"onUpdate:modelValue":p[1]||(p[1]=i=>w.value.shopName=i),placeholder:"商品名称",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(V,{label:"状态"},{default:l(()=>[e(L,{modelValue:w.value.status,"onUpdate:modelValue":p[2]||(p[2]=i=>w.value.status=i),size:"default",placeholder:"选择状态",clearable:""},{default:l(()=>[e(U,{label:"已上架",value:"0"}),e(U,{label:"待上架",value:"1"}),e(U,{label:"已下架",value:"2"})]),_:1},8,["modelValue"])]),_:1}),e(V,null,{default:l(()=>[e(x,{type:"primary",plain:"",onClick:p[3]||(p[3]=()=>{})},{default:l(()=>[n("搜索")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{class:"top_btn_panel"},{default:l(()=>[e(x,{type:"primary",onClick:d},{default:l(()=>[n("添加商品")]),_:1})]),_:1}),e(g,{shadow:"never",class:"vel_card_override content"},{default:l(()=>[e(B,{class:"shop_table",data:H.value},{empty:l(()=>[e(A,{description:"暂无数据"})]),default:l(()=>[e(h,{prop:"shopNo",label:"编号",sortable:"",width:"100"}),e(h,{label:"商品名称","min-width":"250"},{default:l(i=>[o("div",fl,[e(z,null,{default:l(()=>[n(f(i.row.shopName),1)]),_:2},1024)])]),_:1}),e(h,{prop:"thumb",label:"缩略图","min-width":"150"},{default:l(i=>[e($,{class:"goods_thumb",src:i.row.thumb},null,8,["src"])]),_:1}),e(h,{label:"分类",width:"180"},{default:l(i=>[o("div",hl,[e(z,null,{default:l(()=>[n(f(i.row.shopTypeName),1)]),_:2},1024)])]),_:1}),e(h,{prop:"status",label:"状态",sortable:"",width:"120"},{default:l(i=>[i.row.status==="0"?(u(),y(j,{key:0},{default:l(()=>[n("已上架")]),_:1})):i.row.status==="1"?(u(),y(j,{key:1,type:"warning"},{default:l(()=>[n("待上架")]),_:1})):i.row.status==="2"?(u(),y(j,{key:2,type:"info"},{default:l(()=>[n("已下架")]),_:1})):P("",!0)]),_:1}),e(h,{fixed:"right",label:"操作",width:"230"},{default:l(i=>[o("div",vl,[e(x,{type:"success",plain:""},{default:l(()=>[n("编辑")]),_:1}),e(x,{type:"primary",plain:""},{default:l(()=>[n("详情")]),_:1}),e(x,{type:"danger",plain:""},{default:l(()=>[n("删除")]),_:1})])]),_:1})]),_:1},8,["data"]),e(E,{background:"",layout:"prev, pager, next",total:1e3})]),_:1}),e(cl,{dialog:T.value,onOnConfirm:p[4]||(p[4]=()=>{})},null,8,["dialog"])])}}},Xl=se(gl,[["__scopeId","data-v-9ac44d9f"]]);export{Xl as default};
