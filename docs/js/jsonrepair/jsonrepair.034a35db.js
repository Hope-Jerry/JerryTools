class l extends Error{constructor(n,r){super(n+" at position "+r),this.position=r}}const S=92,v=47,pe=42,R=123,O=125,J=91,k=93,Ce=40,Ae=41,ge=32,V=10,Z=9,q=13,we=8,me=12,Q=34,K=43,M=45,G=39,z=48,X=57,N=44,be=46,Se=58,Oe=59,ke=65,Ne=97,Ee=69,Qe=101,De=70,ye=102,Be=160,ve=8192,Le=8202,Ue=8239,Ve=8287,$e=12288,Ie=8220,je=8221,We=8216,Fe=8217,Re=96,Je=180;function Ke(e){return e>=z&&e<=X||e>=ke&&e<=De||e>=Ne&&e<=ye}function E(e){return e>=z&&e<=X}function Me(e){return e>=32&&e<=1114111}function L(e){return Pe.test(e)||D(e.charCodeAt(0))}const Pe=/^[,:[\]{}()\n+]$/;function P(e){return Te.test(e)||e&&D(e.charCodeAt(0))}const Te=/^[[{\w-]$/;function He(e){return e===V||e===q||e===Z||e===we||e===me}function A(e){return e===ge||e===V||e===Z||e===q}function Ze(e){return e===Be||e>=ve&&e<=Le||e===Ue||e===Ve||e===$e}function D(e){return Y(e)||U(e)}function Y(e){return e===Q||e===Ie||e===je}function T(e){return e===Q}function U(e){return e===G||e===We||e===Fe||e===Re||e===Je}function H(e){return e===G}function C(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const g=e.lastIndexOf(n);return g!==-1?e.substring(0,g)+(r?"":e.substring(g+1)):e}function a(e,n){let r=e.length;if(!A(e.charCodeAt(r-1)))return e+n;for(;A(e.charCodeAt(r-1));)r--;return e.substring(0,r)+n+e.substring(r)}function qe(e,n,r){return e.substring(0,n)+e.substring(n+r)}function Ge(e){return/[,\n][ \t\r]*$/.test(e)}function ze(e,n){let r=n;for(;A(e.charCodeAt(r));)r++;return e.charAt(r)}const Xe={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},Ye={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function en(e){let n=0,r="";d()||le();const y=h(N);for(y&&i(),P(e[n])&&Ge(r)?(y||(r=a(r,",")),ce()):y&&(r=C(r,","));e.charCodeAt(n)===O||e.charCodeAt(n)===k;)n++,i();if(n>=e.length)return r;ue();function d(){i();const c=ne()||re()||w()||se()||te()||I();return i(),c}function i(){const c=n;let o=$();do o=_(),o&&(o=$());while(o);return n>c}function $(){let c="",o;for(;(o=A(e.charCodeAt(n)))||Ze(e.charCodeAt(n));)o?c+=e[n]:c+=" ",n++;return c.length>0?(r+=c,!0):!1}function _(){if(e.charCodeAt(n)===v&&e.charCodeAt(n+1)===pe){for(;n<e.length&&!_e(e,n);)n++;return n+=2,!0}if(e.charCodeAt(n)===v&&e.charCodeAt(n+1)===v){for(;n<e.length&&e.charCodeAt(n)!==V;)n++;return!0}return!1}function h(c){return e.charCodeAt(n)===c?(r+=e[n],n++,!0):!1}function x(c){return e.charCodeAt(n)===c?(n++,!0):!1}function ee(){return x(S)}function ne(){if(e.charCodeAt(n)===R){r+="{",n++,i();let c=!0;for(;n<e.length&&e.charCodeAt(n)!==O;){let o;if(c?(o=!0,c=!1):(o=h(N),o||(r=a(r,",")),i()),!(w()||I())){e.charCodeAt(n)===O||e.charCodeAt(n)===R||e.charCodeAt(n)===k||e.charCodeAt(n)===J||e[n]===void 0?r=C(r,","):fe();break}i();const m=h(Se),s=n>=e.length;m||(P(e[n])||s?r=a(r,":"):j()),d()||(m||s?r+="null":j())}return e.charCodeAt(n)===O?(r+="}",n++):r=a(r,"}"),!0}return!1}function re(){if(e.charCodeAt(n)===J){r+="[",n++,i();let c=!0;for(;n<e.length&&e.charCodeAt(n)!==k;)if(c?c=!1:h(N)||(r=a(r,",")),!d()){r=C(r,",");break}return e.charCodeAt(n)===k?(r+="]",n++):r=a(r,"]"),!0}return!1}function ce(){let c=!0,o=!0;for(;o;)c?c=!1:h(N)||(r=a(r,",")),o=d();o||(r=C(r,",")),r=`[
${r}
]`}function w(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=e.charCodeAt(n)===S;if(o&&(n++,o=!0),D(e.charCodeAt(n))){const u=T(e.charCodeAt(n))?T:H(e.charCodeAt(n))?H:U(e.charCodeAt(n))?U:Y,m=n;let s='"';n++;const W=c?t=>L(e[t]):t=>u(e.charCodeAt(t));for(;n<e.length&&!W(n);){if(e.charCodeAt(n)===S){const t=e.charAt(n+1);if(Ye[t]!==void 0)s+=e.slice(n,n+2),n+=2;else if(t==="u"){let p=2;for(;p<6&&Ke(e.charCodeAt(n+p));)p++;p===6?(s+=e.slice(n,n+6),n+=6):n+p>=e.length?n=e.length:de()}else s+=t,n+=2}else{const t=e.charAt(n),b=e.charCodeAt(n);b===Q&&e.charCodeAt(n-1)!==S?(s+="\\"+t,n++):He(b)?(s+=Xe[t],n++):(Me(b)||ae(t),s+=t,n++)}o&&ee()}const F=D(e.charCodeAt(n));return!(F&&(n+1>=e.length||L(ze(e,n+1))))&&!c?(n=m,w(!0)):(F?(s+='"',n++):s=a(s,'"'),r+=s,oe(),!0)}return!1}function oe(){let c=!1;for(i();e.charCodeAt(n)===K;){c=!0,n++,i(),r=C(r,'"',!0);const o=r.length;w()?r=qe(r,o,1):r=a(r,'"')}return c}function se(){const c=n;if(e.charCodeAt(n)===M&&(n++,B(c)))return!0;for(;E(e.charCodeAt(n));)n++;if(e.charCodeAt(n)===be){if(n++,B(c))return!0;for(;E(e.charCodeAt(n));)n++}if(e.charCodeAt(n)===Qe||e.charCodeAt(n)===Ee){if(n++,(e.charCodeAt(n)===M||e.charCodeAt(n)===K)&&n++,B(c))return!0;for(;E(e.charCodeAt(n));)n++}if(n>c){const o=e.slice(c,n),u=/^0\d/.test(o);return r+=u?`"${o}"`:o,!0}return!1}function te(){return f("true","true")||f("false","false")||f("null","null")||f("True","true")||f("False","false")||f("None","null")}function f(c,o){return e.slice(n,n+c.length)===c?(r+=o,n+=c.length,!0):!1}function I(){const c=n;for(;n<e.length&&!L(e[n]);)n++;if(n>c){if(e.charCodeAt(n)===Ce)return n++,d(),e.charCodeAt(n)===Ae&&(n++,e.charCodeAt(n)===Oe&&n++),!0;{for(;A(e.charCodeAt(n-1))&&n>0;)n--;const o=e.slice(c,n);return r+=o==="undefined"?"null":JSON.stringify(o),e.charCodeAt(n)===Q&&n++,!0}}}function ie(c){if(!E(e.charCodeAt(n))){const o=e.slice(c,n);throw new l(`Invalid number '${o}', expecting a digit ${he()}`,n)}}function B(c){return n>=e.length?(r+=e.slice(c,n)+"0",!0):(ie(c),!1)}function ae(c){throw new l("Invalid character "+JSON.stringify(c),n)}function ue(){throw new l("Unexpected character "+JSON.stringify(e[n]),n)}function le(){throw new l("Unexpected end of json string",e.length)}function fe(){throw new l("Object key expected",n)}function j(){throw new l("Colon expected",n)}function de(){const c=e.slice(n,n+6);throw new l(`Invalid unicode character "${c}"`,n)}function he(){return e[n]?`but got '${e[n]}'`:"but reached end of input"}}function _e(e,n){return e[n]==="*"&&e[n+1]==="/"}export{en as j};
